{"version":3,"file":"index.js","sources":["../../resources/icon.png?asset","../../src/main/index.ts"],"sourcesContent":["\n          import { join } from 'path'\n          export default join(__dirname, __VITE_NODE_PUBLIC_ASSET__92cb34e2__)","import { app, shell, BrowserWindow, ipcMain } from 'electron'\nimport * as path from 'path'\nimport * as fs from 'fs'\nimport { electronApp, optimizer, is } from '@electron-toolkit/utils'\nimport icon from '../../resources/icon.png?asset'\nimport { Domain } from '../model/domains/domain'\n\nfunction createWindow(): void {\n  // Create the browser window.\n  const mainWindow = new BrowserWindow({\n    width: 900,\n    height: 670,\n    show: false,\n    autoHideMenuBar: true,\n    ...(process.platform === 'linux' ? { icon } : {}),\n    webPreferences: {\n      preload: path.join(__dirname, '../preload/index.js'),\n      sandbox: false\n    }\n  })\n\n  mainWindow.on('ready-to-show', () => {\n    mainWindow.show()\n  })\n\n  mainWindow.webContents.setWindowOpenHandler((details) => {\n    shell.openExternal(details.url)\n    return { action: 'deny' }\n  })\n\n  // HMR for renderer base on electron-vite cli.\n  // Load the remote URL for development or the local html file for production.\n  if (is.dev && process.env['ELECTRON_RENDERER_URL']) {\n    mainWindow.loadURL(process.env['ELECTRON_RENDERER_URL'])\n  } else {\n    mainWindow.loadFile(path.join(__dirname, '../renderer/index.html'))\n  }\n}\n\n// This method will be called when Electron has finished\n// initialization and is ready to create browser windows.\n// Some APIs can only be used after this event occurs.\napp.whenReady().then(() => {\n  // Set app user model id for windows\n  electronApp.setAppUserModelId('com.electron')\n\n  // Default open or close DevTools by F12 in development\n  // and ignore CommandOrControl + R in production.\n  // see https://github.com/alex8088/electron-toolkit/tree/master/packages/utils\n  app.on('browser-window-created', (_, window) => {\n    optimizer.watchWindowShortcuts(window)\n  })\n\n  ipcMain.handle('create-domain', async (_, data: Domain) => {\n    // Get the default user directory (Documents)\n    const userDir = app.getPath('documents')\n    const appDir = path.join(userDir, 'MyAppData') // Customize the folder name\n\n    // Ensure the directory exists\n    if (!fs.existsSync(appDir)) {\n      fs.mkdirSync(appDir, { recursive: true })\n    }\n\n    // Define the path for the JSON file\n    const filePath = path.join(appDir, 'domain.json')\n\n    // Write JSON data to file\n    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf-8')\n\n    return filePath // Optionally return the file path\n  })\n\n  createWindow()\n\n  app.on('activate', function () {\n    // On macOS it's common to re-create a window in the app when the\n    // dock icon is clicked and there are no other windows open.\n    if (BrowserWindow.getAllWindows().length === 0) createWindow()\n  })\n})\n\n// Quit when all windows are closed, except on macOS. There, it's common\n// for applications and their menu bar to stay active until the user quits\n// explicitly with Cmd + Q.\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit()\n  }\n})\n\n// In this file you can include the rest of your app\"s specific main process\n// code. You can also put them in separate files and require them here.\n"],"names":["join","BrowserWindow","path","shell","is","app","electronApp","optimizer","ipcMain","fs"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEU,MAAA,OAAeA,KAAI,KAAC,WAAW,0BAAoC;ACK7E,SAAS,eAAqB;AAEtB,QAAA,aAAa,IAAIC,uBAAc;AAAA,IACnC,OAAO;AAAA,IACP,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,iBAAiB;AAAA,IACjB,GAAI,QAAQ,aAAa,UAAU,EAAE,SAAS,CAAC;AAAA,IAC/C,gBAAgB;AAAA,MACd,SAASC,gBAAK,KAAK,WAAW,qBAAqB;AAAA,MACnD,SAAS;AAAA,IAAA;AAAA,EACX,CACD;AAEU,aAAA,GAAG,iBAAiB,MAAM;AACnC,eAAW,KAAK;AAAA,EAAA,CACjB;AAEU,aAAA,YAAY,qBAAqB,CAAC,YAAY;AACjDC,mBAAA,aAAa,QAAQ,GAAG;AACvB,WAAA,EAAE,QAAQ,OAAO;AAAA,EAAA,CACzB;AAID,MAAIC,MAAG,GAAA,OAAO,QAAY,IAAA,uBAAuB,GAAG;AACvC,eAAA,QAAQ,QAAY,IAAA,uBAAuB,CAAC;AAAA,EAAA,OAClD;AACL,eAAW,SAASF,gBAAK,KAAK,WAAW,wBAAwB,CAAC;AAAA,EAAA;AAEtE;AAKAG,SAAAA,IAAI,UAAA,EAAY,KAAK,MAAM;AAEzBC,QAAA,YAAY,kBAAkB,cAAc;AAK5CD,WAAAA,IAAI,GAAG,0BAA0B,CAAC,GAAG,WAAW;AAC9CE,UAAA,UAAU,qBAAqB,MAAM;AAAA,EAAA,CACtC;AAEDC,WAAAA,QAAQ,OAAO,iBAAiB,OAAO,GAAG,SAAiB;AAEnD,UAAA,UAAUH,SAAAA,IAAI,QAAQ,WAAW;AACvC,UAAM,SAASH,gBAAK,KAAK,SAAS,WAAW;AAG7C,QAAI,CAACO,cAAG,WAAW,MAAM,GAAG;AAC1BA,oBAAG,UAAU,QAAQ,EAAE,WAAW,MAAM;AAAA,IAAA;AAI1C,UAAM,WAAWP,gBAAK,KAAK,QAAQ,aAAa;AAG7CO,kBAAA,cAAc,UAAU,KAAK,UAAU,MAAM,MAAM,CAAC,GAAG,OAAO;AAE1D,WAAA;AAAA,EAAA,CACR;AAEY,eAAA;AAETJ,eAAA,GAAG,YAAY,WAAY;AAG7B,QAAIJ,SAAc,cAAA,cAAA,EAAgB,WAAW,EAAgB,cAAA;AAAA,EAAA,CAC9D;AACH,CAAC;AAKDI,SAAAA,IAAI,GAAG,qBAAqB,MAAM;AAC5B,MAAA,QAAQ,aAAa,UAAU;AACjCA,aAAAA,IAAI,KAAK;AAAA,EAAA;AAEb,CAAC;"}